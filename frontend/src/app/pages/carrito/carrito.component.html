<section class="h-auto lg:h-screen flex flex-col lg:flex-row justify-center lg:items-center" id="fondo">
        @if(this.carritoService.espera){
            <div class="flex justify-center items-center h-full">
                <div class="bg-gray-200 w-32 h-32 flex justify-center rounded-lg">
                    <span class="loading loading-spinner loading-lg"></span>
                </div>
            </div>
        }@else{
            <div class="bg-white rounded-xl md:rounded-3xl md:mx-5 md:my-6 mx-2 my-2 lg:w-3/6 h-fit">
            <div class=" space-y-4 md:space-y-6 sm:p-4 overflow-x-auto">
                <h1 class="text-2xl font-bold leading-tight tracking-tight text-center">
                    Carrito de compra
                </h1>
                <table class="table table-auto">
                    <tbody>
                    @for (producto of carritoService.enCarrito; track producto._id) {
                        <tr>
                            <td class="flex">
                                <img [ngSrc]="producto?.imagen[0]" [alt]="producto?.nombre" width="150" height="100" class="hover:cursor-pointer aspect-auto md:w-40 rounded-xl mr-4" routerLink="/productos/{{producto._id}}" priority="">
                                <section class="flex flex-col grow">
                                    <div class="flex flex-col gap-3 mt-5 ">
                                        <div class="flex flex-col-reverse md:flex-row  justify-between">
                                            <div class="hover:cursor-pointer" routerLink="/productos/{{producto._id}}">
                                                <h1 class="font-bold text-xl">{{producto?.nombre}}</h1>
                                                <h2 class="text-amber-700 font-medium text-lg">{{producto?.proveedor}}</h2> 
                                                <h4 class="text-gray-500 font-normal text-base">{{(producto?.descripcion).slice(0,30)}}...</h4> 
                                            </div>
                                            <span class="text-base font-semibold ">
                                                {{producto?.precio * producto?.cantidad | currency:'':'symbol':'1.0-0' }}
                                            </span>
                                        </div>
                                        <div>
                                            <p class="font-normal text-base"><label for="cantidad">Cantidad:</label>
                                            <select class="select select-xs md:select-sm select-bordered text-sm" name="cantidad" id="cantidad" (change)="onChange($event, producto)">
                                                @for (i of [1,2,3,4,5,6,7,8,9,10]; track i) {
                                                    <option value="{{i}}" [selected]="i == producto?.cantidad">{{i}}</option>
                                                }
                                            </select> </p>
                                            <span class="font-light text-base">Precio unitario: {{producto?.precio | currency:'':'symbol':'1.0-0' }}</span>
                                        </div>
                                    </div>     
                                </section>
                            </td>
                        </tr>
                    }
                    </tbody>
                </table>
            </div>
        </div>
        <aside class="bg-white rounded-lg shadow-md h-fit lg:w-1/3 py-3 px-7 md:mx-5 md:my-6 mx-2 my-2">
            <h1 class="text-2xl font-bold leading-tight tracking-tight text-center">
                Resumen
            </h1>
        <div class="divide-y-2 space-y-3">
            <section class="space-y-1">
                <article class="flex justify-between">
                    <h2 class="font-medium">Subtotal:</h2>
                    <span>{{subTotal()| currency:'':'symbol':'1.0-0'}}</span>
                </article>
                <article class="flex justify-between">
                    <h2 class="font-medium">IVA:</h2>
                    <span>{{iva| currency:'':'symbol':'1.0-0'}}</span>
                </article>
                <article class="flex justify-between">
                    <h2 class="font-medium">Gastos de envio: </h2>
                    <span>Gratis</span>
                </article>
            </section>
            <section class="space-y-1">
                <article class="flex justify-between">
                    <h2 class="font-medium">Descuento por oferta especial:</h2>
                    <span>{{descuento| currency:'':'symbol':'1.0-0'}}</span>
                </article>
                <article class="flex justify-between">
                    <h2 class="font-bold">Total:</h2>
                    <span>{{total| currency:'':'symbol':'1.0-0'}}</span>
                </article>
            </section>
            <section class="flex justify-center pt-4 ">
                <button class="btn btn-wide bg-black text-white hover:text-black rounded-full" >Pagar</button>
            </section>
        </div>
        
        </aside>}
</section>